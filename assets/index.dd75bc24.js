import{l as e,r as s,c as t,o as a,a as r,b as o,w as l,v as n,u as i,d as c,e as d,t as u,f as m,F as f,g as p,h,i as b}from"./vendor.fb343ebb.js";!function(e=".",s="__import__"){try{self[s]=new Function("u","return import(u)")}catch(t){const a=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[s]=e=>new Promise(((t,o)=>{const l=new URL(e,a);if(self[s].moduleMap[l])return t(self[s].moduleMap[l]);const n=new Blob([`import * as m from '${l}';`,`${s}.moduleMap['${l}']=m;`],{type:"text/javascript"}),i=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(n),onerror(){o(new Error(`Failed to import: ${e}`)),r(i)},onload(){t(self[s].moduleMap[l]),r(i)}});document.head.appendChild(i)})),self[s].moduleMap={}}}("assets/");class y{constructor(e){this.description=e.offenseDescription,this.counts=e.counts,this.convictionDate=e.convictionDate||null,this.expirationDate=e.expiresFromRegistry||null,this.judgement=e.judgement||null}}class v{constructor(s){this.imgSrc=s.headPhoto,this.name=s.name,this.aliases=s.alias,this.dob=s.dob,this.address=s.address;let t=s.offenses.map((e=>new y(e)));this.offenses=e.orderBy(t,"convictionDate","desc"),this.latestConvictionDate=this.offenses.length?e.first(this.offenses).convictionDate:null}}const g=s({loading:!1,error:"",data:[]});const w=s({searchTerm:"",sort:"latestConvictionDate",order:"desc"});function D(){w.searchTerm="",w.sort="latestConvictionDate",w.order="desc"}const k=t((()=>{let s=w.searchTerm?e.filter(g.data,(({name:s,aliases:t,address:a})=>e.includes([s,t,a].join(" ").toLowerCase(),w.searchTerm.toLowerCase()))):g.data;return e.orderBy(s,w.sort,w.order)})),j={class:"bg-light p-3 my-3"},S=o("summary",null,"Filter Records",-1),C={class:"form-inline"},x=o("label",{class:"sr-only",for:"filterSearch"},"Search",-1),L=o("label",{class:"sr-only",for:"filterSort"},"Sort By",-1),R=o("option",{value:"",disabled:""},"Sort By...",-1),U=o("option",{value:"latestConvictionDate"},"Conviction Date",-1),O=o("option",{value:"name"},"Name",-1),B=o("option",{value:"dob"},"Date of Birth",-1),A=o("label",{class:"sr-only",for:"filterOrder"},"Order",-1),T=o("option",{value:"",disabled:""},"Order...",-1),F=o("option",{value:"asc"},"Ascending",-1),M=o("option",{value:"desc"},"Descending",-1),_={expose:[],setup:e=>(e,s)=>(a(),r("details",j,[S,o("form",C,[x,l(o("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>i(w).searchTerm=e),id:"filterSearch",class:"form-control mr-sm-2 mb-2",placeholder:"Search"},null,512),[[n,i(w).searchTerm]]),L,l(o("select",{"onUpdate:modelValue":s[2]||(s[2]=e=>i(w).sort=e),id:"",class:"form-control mr-sm-2 mb-2"},[R,U,O,B],512),[[c,i(w).sort]]),A,l(o("select",{"onUpdate:modelValue":s[3]||(s[3]=e=>i(w).order=e),id:"filterOrder",class:"form-control mr-sm-2 mb-2"},[T,F,M],512),[[c,i(w).order]]),o("button",{type:"reset",onClick:s[4]||(s[4]=d(((...e)=>i(D)&&i(D)(...e)),["prevent"])),class:"btn btn-primary mb-2"}," Reset ")])]))},V={class:"card card-body abuser my-3"},$={class:"row"},E={class:"col-sm-4"},N={class:"text-center"},P={key:1,class:"h2 thumbnail"},z=o("i",{class:"fa fa-user fa-5x"},null,-1),I=o("br",null,null,-1),J=h(" No Image "),q={class:"col-sm-8"},G={class:"dl-horizontal"},H=o("dt",null,"Name",-1),K={key:0},Q={key:1},W=o("dt",null,"Date of Birth",-1),X=o("dt",null,"Address",-1),Y={key:2},Z={key:3},ee={class:"list-unstyled"},se=o("em",null,"Conviction Date:",-1),te={key:0},ae={expose:[],props:{abuser:Object},setup(e){const s=e=>new Date(e).toLocaleDateString();return(t,l)=>(a(),r("div",V,[o("div",$,[o("div",E,[o("p",N,[e.abuser.imgSrc?(a(),r("img",{key:0,src:e.abuser.imgSrc,alt:e.abuser.name,class:"img-responsive center-block img-fluid mx-auto"},null,8,["src","alt"])):(a(),r("span",P,[z,I,J]))])]),o("div",q,[o("dl",G,[H,o("dd",null,u(e.abuser.name),1),e.abuser.aliases?(a(),r("dt",K,"Alias(es)")):m("",!0),e.abuser.aliases?(a(),r("dd",Q,u(e.abuser.aliases),1)):m("",!0),W,o("dd",null,u(s(e.abuser.dob)),1),X,o("dd",null,u(e.abuser.address),1),e.abuser.offenses.length?(a(),r("dt",Y,"Offenses")):m("",!0),e.abuser.offenses.length?(a(),r("dd",Z,[o("ul",null,[(a(!0),r(f,null,p(e.abuser.offenses,((e,t)=>(a(),r("li",{key:t},[o("ul",ee,[o("li",null,u(e.counts)+" count(s) of "+u(e.description),1),o("li",null,[se,h(" "+u(s(e.convictionDate)),1)]),e.judgement?(a(),r("li",te,[o("a",{href:e.judgement,target:"_blank"}," View Judgment and Sentence ",8,["href"])])):m("",!0)])])))),128))])])):m("",!0)])])])]))}};const re={key:0,class:"d-flex justify-content-center"},oe=o("div",{class:"spinner-border",role:"status"},[o("span",{class:"visually-hidden"},"Loading...")],-1),le={key:1,class:"alert alert-warning"};b({expose:[],setup:e=>(async function(){g.loading=!0;try{const e="https://app.hillsboroughcounty.org/CAAR/Abuser",s=await fetch(e).then((e=>e.json())).catch((e=>{throw new Error("Unable to fetch records from server.")}));g.data=s.map((e=>new v(e)))}catch(e){g.error=e.message}finally{g.loading=!1}}(),(e,s)=>(a(),r("div",null,[o(_),i(g).loading?(a(),r("div",re,[oe])):i(g).error?(a(),r("div",le,u(i(g).error),1)):(a(!0),r(f,{key:2},p(i(k),((e,s)=>(a(),r(ae,{key:s,abuser:e},null,8,["abuser"])))),128))])))}).mount("#app");
